<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Music and DVD</title>
    <link rel="stylesheet" type="text/css" href="style-size.css" />
    <link rel="stylesheet" type="text/css" href="style-layout.css" />
    <link rel="stylesheet" type="text/css" href="style-presentation.css" />
  </head>
  <body class="booklist musiclist aerialview">
    <div class="head">음반/DVD</div>
    <ul>
      <!-- 오디오 -->
      <li>
        <img
          height="200"
          src="http://peach.blender.org/wp-content/uploads/poster_rodents_small.jpg"
        />
        <br />
        Big Buck Bunny - 4 - Death Becomes Fur<br />
        <audio
          id="audio1"
          src="http://media.w3.org/2010/07/bunny/04-Death_Becomes_Fur.mp4"
        >
          Your browser does not support the audio tag.
        </audio>
        <div class="controls">
          <button class="play" data-target="audio1">재생</button>
          <span class="time" data-target="audio1">0:00 / 0:00</span>
          <label>
            볼륨
            <input
              type="range"
              class="volume"
              data-target="audio1"
              min="0"
              max="1"
              step="0.01"
              value="1"
            />
          </label>
        </div>
      </li>

      <!-- 비디오 -->
      <li>
        <img
          height="200"
          src="http://www.sintel.org/wp-content/uploads/2010/05/title-Sintel.jpg"
        />
        <video
          id="video1"
          height="200"
          src="http://media.w3.org/2010/05/sintel/trailer.mp4"
        >
          Your browser does not support the video tag.
        </video>
        <div class="controls">
          <button class="play" data-target="video1">재생</button>
          <span class="time" data-target="video1">0:00 / 0:00</span>
          <label>
            볼륨
            <input
              type="range"
              class="volume"
              data-target="video1"
              min="0"
              max="1"
              step="0.01"
              value="1"
            />
          </label>
        </div>
      </li>
    </ul>

    <script>
      function formatTime(sec) {
        if (isNaN(sec)) return '0:00';
        const m = Math.floor(sec / 60);
        const s = Math.floor(sec % 60)
          .toString()
          .padStart(2, '0');
        return m + ':' + s;
      }

      function setupMedia(id) {
        const media = document.getElementById(id);
        const playBtn = document.querySelector(
          '.play[data-target="' + id + '"]'
        );
        const timeSpan = document.querySelector(
          '.time[data-target="' + id + '"]'
        );
        const volumeInput = document.querySelector(
          '.volume[data-target="' + id + '"]'
        );

        // 재생 / 일시정지
        playBtn.addEventListener('click', function () {
          if (media.paused) {
            media.play();
          } else {
            media.pause();
          }
        });

        media.addEventListener('play', function () {
          playBtn.textContent = '일시 정지';
        });
        media.addEventListener('pause', function () {
          playBtn.textContent = '재생';
        });

        // 시간 업데이트
        media.addEventListener('loadedmetadata', function () {
          timeSpan.textContent =
            formatTime(media.currentTime) + ' / ' + formatTime(media.duration);
        });

        media.addEventListener('timeupdate', function () {
          timeSpan.textContent =
            formatTime(media.currentTime) + ' / ' + formatTime(media.duration);
        });

        // 볼륨
        volumeInput.addEventListener('input', function () {
          media.volume = parseFloat(volumeInput.value);
        });
      }

      setupMedia('audio1');
      setupMedia('video1');
    </script>
  </body>
</html>
